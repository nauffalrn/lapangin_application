<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${lapangan.namaLapangan}">Detail Lapangan</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <link rel="stylesheet" th:href="@{/css/detail_lapangan.css}" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
  </head>
  <body>
    <div class="container">
      <aside class="sidebar">
        <header class="sidebar-header">
          <a class="header-logo">
            <img th:src="@{/images/LA.png}" alt="Lapangin" />
          </a>
          <button class="toggler sidebar-toggler">
            <span class="material-symbols-rounded">chevron_left</span>
          </button>
        </header>

        <nav class="sidebar-nav">
          <ul class="nav-list primary-nav">
            <li class="nav-item">
              <a th:href="@{/dashboard}" class="nav-link">
                <span class="nav-icon material-symbols-rounded">dashboard</span>
                <span class="nav-label">Dashboard</span>
              </a>
              <span class="nav-tooltip">Dashboard</span>
            </li>
          </ul>

          <ul class="nav-list secondary-nav">
            <li class="nav-item toggle-dark-mode">
              <span class="dark-mode-label">Dark Mode</span>
              <label class="toggle-switch">
                <input type="checkbox" id="dark-mode-toggle" />
                <span class="slider"></span>
              </label>
            </li>
            <li class="nav-item">
              <a th:href="@{/profile}" class="nav-link">
                <span class="nav-icon material-symbols-rounded"
                  >account_circle</span
                >
                <span class="nav-label">Profile</span>
              </a>
              <span class="nav-tooltip">Profile</span>
            </li>
            <li class="nav-item">
              <a th:href="@{/login}" class="nav-link">
                <span class="nav-icon material-symbols-rounded">logout</span>
                <span class="nav-label">Logout</span>
              </a>
              <span class="nav-tooltip">Logout</span>
            </li>
          </ul>
        </nav>
      </aside>

      <main class="main-content detail-page-wrapper">
        <div class="detail-main-container">
          <!-- Judul dan Info Venue -->
          <div class="detail-venue-title">
            <h1 th:text="${lapangan.namaLapangan}">Nama Lapangan</h1>
          </div>

          <div class="detail-venue-info">
            <div class="detail-venue-location">
              <i class="fas fa-map-marker-alt"></i>
              <span th:text="${lapangan.city}">Daerah</span>
            </div>
            <div class="detail-venue-status">
              <i class="fas fa-clock"></i>
              <span th:text="'Jam Operasional: ' + ${lapangan.jamBuka} + ' - ' + ${lapangan.jamTutup}">Jam Operasional</span>
            </div>
            <div class="detail-venue-rating">
              <span>‚≠ê <span th:text="${lapangan.rating}"></span></span>
              <span
                >(<span th:text="${lapangan.reviews}"></span> reviews)</span
              >
            </div>
          </div>

          <div class="detail-gallery">
            <div class="detail-main-img">
              <img
                th:src="@{/images/{lapangan.image}(lapangan.image=${lapangan.image})}"
                alt="Nama Lapangan - Main View"
              />
            </div>
          </div>

          <div class="detail-section detail-price">
            <h2>Harga Sewa / Jam</h2>
            <span th:text="${lapangan.formattedPrice}">Rp. 0</span>
          </div>

          <div class="detail-section">
            <h2>Alamat Lapangan</h2>
            <span
              >Alamat:
              <span th:text="${lapangan.alamatLapangan}"
                >Alamat Lapangan</span
              ></span
            >
          </div>

          <!-- Fasilitas -->
          <div class="detail-section">
            <h2>Fasilitas</h2>
            <div class="detail-facilities">
              <ul>
                <li
                  th:each="facility : ${lapangan.fieldFacilitiesAsList}"
                  th:text="${facility}"
                >
                  Fasilitas
                </li>
              </ul>
            </div>
          </div>

          <!-- Jadwal Tersedia -->
          <div class="detail-section detail-schedule">
            <h2>Jadwal Lapangan</h2>
            <div class="calendar-nav">
              <button class="calendar-btn" onclick="lihatKalender()">
                <i class="bx bx-calendar"></i>
                Lihat Jadwal
              </button>
              <div class="date-scroll" id="dateScroll">
                <!-- Tanggal akan diisi oleh JavaScript -->
              </div>
            </div>

            <div class="ticket-list" id="ticketList">
              <!-- Daftar court akan diisi oleh JavaScript -->
            </div>
          </div>

          <!-- Reviews Section -->
          <div class="detail-section">
            <h2>Reviews</h2>
            <div id="reviewsContainer">
              <!-- Reviews akan diisi oleh JavaScript -->
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Modal Jadwal -->
    <div id="scheduleModal" class="detail-modal">
      <div class="detail-modal-content">
        <div class="modal-header">
          <h2>
            Jadwal Lapangan -
            <span th:text="${lapangan.namaLapangan}">Nama Lapangan</span>
          </h2>
          <span class="detail-close-modal" onclick="tutupModal()">&times;</span>
        </div>

        <div class="modal-date-display">
          <i class="bx bx-calendar"></i>
          <span id="selectedDate">Tanggal</span>
        </div>

        <div class="detail-schedule-grid" id="scheduleGrid">
          <!-- Slot jadwal akan diisi oleh JavaScript -->
        </div>

        <div class="modal-footer">
          <div class="selected-slots-summary">
            <span>Jadwal dipilih: <span id="selectedSlotsCount">0</span></span>
            <span>Total: Rp <span id="totalPrice">0</span></span>
          </div>
          <button
            id="checkoutButton"
            class="checkout-btn"
            disabled
            onclick="lanjutPembayaran()"
          >
            Lanjutkan ke Pembayaran
          </button>
        </div>
      </div>
    </div>

    <!-- Hidden Input for Promo Status -->
    <input type="hidden" id="hasPromo" th:value="${hasPromo}" />

    <!-- Hidden Input untuk ID Lapangan -->
    <input type="hidden" id="lapanganId" th:value="${lapangan.id}" />

    <!-- Scripts -->
    <script th:src="@{/js/script.js}"></script>
    <script th:src="@{/js/darkmode.js}"></script>
    <script th:src="@{/js/detail_lapangan.js}"></script>
  </body>
</html>
